<%- include('partials/head', { title: 'Horse Queue', css: 'queue' }) %>

<body>
  <%- include('partials/header-nav', {name: user.username}) %>
  <div id="page-container">
    <div class="row">
      <div class="col">
        <h2 class="text-center my-3">Queue</h2>
      </div>
    </div>
    <div class="row">
      <div class="col">

        <table id="queue" class="table table-striped table-dark" width="95%">
          <thead>
            <tr role="row">
              <th scope="col" id="left-col">Horse</th>
              <th scope="col">Location</th>
              <th scope="col" id="right-col">Last Visit</th>
              <th scope="col" id="assigned">Assigned To</th>
              <th scope="col" id="button" data-orderable="false"></th>
            </tr>
          </thead>
          <tbody id="queue-body">
            <% for (horse of horses) { %>

            <% let assignedFarrier = users.find(user => user.id == horse.assignedFarrier) %>
            <%-  include('partials/queue-item', { horse,assignedFarrier, scripts }) %>
            <% } %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</body>
<script>
  const userfname = document.createElement('div');
  userfname.innerText = `<%=user.fname %>`
  const userlname = document.createElement('div');
  userlname.innerText = `<%=user.lname %>`
</script>

<script src="/public/javascripts/queue.js"></script>
